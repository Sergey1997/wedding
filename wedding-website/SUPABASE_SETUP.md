# Настройка Supabase для формы RSVP

## Шаг 1: Создание проекта в Supabase

1. Перейдите на [supabase.com](https://supabase.com)
2. Войдите или зарегистрируйтесь
3. Создайте новый проект
4. Дождитесь завершения создания проекта (обычно 1-2 минуты)

## Шаг 2: Получение ключей доступа

1. В проекте перейдите в **Settings** → **API**
2. Скопируйте следующие значения:
   - **Project URL** (это будет `VITE_SUPABASE_URL`)
   - **anon public** ключ (это будет `VITE_SUPABASE_ANON_KEY`)

## Шаг 3: Настройка переменных окружения

Создайте файл `.env` в корне проекта:

```env
VITE_SUPABASE_URL=https://your-project.supabase.co
VITE_SUPABASE_ANON_KEY=your-anon-key-here
```

⚠️ **Важно:** Не коммитьте файл `.env` в git! Он уже добавлен в `.gitignore`.

## Шаг 4: Создание таблицы в базе данных

1. В Supabase перейдите в **SQL Editor**
2. Откройте файл `supabase-migration.sql` из этого проекта
3. Скопируйте весь SQL код
4. Вставьте в SQL Editor
5. Нажмите **Run** (или F5)

Таблица `rsvp_submissions` будет создана со следующими полями:
- `id` - уникальный идентификатор (UUID)
- `name` - имя гостя
- `attendance` - будет ли присутствовать ("Да" или "Нет")
- `transfer` - нужен ли трансфер
- `additional_info` - дополнительная информация (опционально)
- `created_at` - дата и время отправки

## Шаг 5: Настройка прав доступа (Row Level Security)

Миграция автоматически настроит:
- ✅ Публичные вставки (любой может отправить форму)
- ✅ Чтение только для авторизованных пользователей (только вы видите ответы)

## Шаг 6: Просмотр ответов

Чтобы посмотреть ответы гостей:

1. В Supabase перейдите в **Table Editor**
2. Выберите таблицу `rsvp_submissions`
3. Вы увидите все отправленные формы

Или используйте SQL запрос:

```sql
SELECT * FROM rsvp_submissions 
ORDER BY created_at DESC;
```

## Проверка работы

После настройки:

1. Запустите проект: `pnpm dev`
2. Откройте сайт в браузере
3. Заполните форму RSVP
4. Отправьте форму
5. Проверьте в Supabase, что запись появилась в таблице

## Альтернатива: Без Supabase

Если вы не хотите использовать Supabase, форма всё равно будет работать:
- Ответы будут логироваться в консоль браузера
- Вы можете добавить свой backend позже

## Экспорт данных

Чтобы экспортировать все ответы:

1. В Supabase перейдите в **Table Editor**
2. Выберите таблицу `rsvp_submissions`
3. Нажмите на три точки (⋮) → **Export** → **CSV**

Или используйте SQL:

```sql
COPY rsvp_submissions TO STDOUT WITH CSV HEADER;
```
